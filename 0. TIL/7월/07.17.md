# [ 0717 ] TIL

---

## 리눅스 정리

### 파일 시스템

- /bin : 기
- /etc : config, password, rc,d
- lib : shared library
- opt : application
- proc : process info
- sbin : 관리용 명령어
- /tmp : 임시 폴더
- /usr : user의 local
- /var : log파일, ftp, spool, mail
- /lost+found : 더이상 사용하지 않는 파일



### ! 

- history의 가장 근접한 명령어 실행 

```shell
ubuntu@ip-172-31-0-94:~$ ls
ttt
ubuntu@ip-172-31-0-94:~$ !l
ls
ttt
ubuntu@ip-172-31-0-94:~$ history 
```

### top, vmstat
- 시스템의 성능을 측정하는 명령어
```shell
top - 14:11:18 up  3:06,  1 user,  load average: 0.00, 0.00, 0.00
Tasks:  98 total,   1 running,  94 sleeping,   3 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.0 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :    949.2 total,    391.1 free,    179.1 used,    379.0 buff/cache
MiB Swap:      0.0 total,      0.0 free,      0.0 used.    613.3 avail Mem 
```

- 해당하는 부분에서 id부분은 쉬고 있는 것을 의미한다. idle부분이 낮다면 주의를 해야한다.


맨 앞으로  컨트롤 a

맨 뒤로 컨트롤 e

adduser : 기본 폴더가 만들어짐

useradd : 폴더가 없음

```bash
ubuntu@ip-172-31-0-94:~$ sudo adduser geon
Adding user `geon' ...
Adding new group `geon' (1001) ...
Adding new user `geon' (1001) with group `geon' ...
Creating home directory `/home/geon' ...
Copying files from `/etc/skel' ...
New password: 
Retype new password: 
passwd: password updated successfully
Changing the user information for geon
Enter the new value, or press ENTER for the default
        Full Name []:  geon 
        Room Number []: 
        Work Phone []: 
        Home Phone []: 
        Other []: 
chfn: name with non-ASCII characters: 'ㅎ�geon'
Is the information correct? [Y/n] y
ubuntu@ip-172-31-0-94:~$ sudo adduser geon
adduser: The user `geon' already exists.
ubuntu@ip-172-31-0-94:~$ ls
ubuntu@ip-172-31-0-94:~$ cd /
ubuntu@ip-172-31-0-94:/$ ls
bin   dev  home  lib32  libx32      media  opt   root  sbin  srv  tmp  var
boot  etc  lib   lib64  lost+found  mnt    proc  run   snap  sys  usr
ubuntu@ip-172-31-0-94:/$ ls
bin   dev  home  lib32  libx32      media  opt   root  sbin  srv  tmp  var
boot  etc  lib   lib64  lost+found  mnt    proc  run   snap  sys  usr
ubuntu@ip-172-31-0-94:/$ cd home/
ubuntu@ip-172-31-0-94:/home$ ls
geon  ubuntu

# /home 폴더에 geon 생김
ubuntu@ip-172-31-0-94:/home$ ll
total 16
drwxr-xr-x  4 root   root   4096 Jul 17 11:06 ./
drwxr-xr-x 19 root   root   4096 Jul 17 11:04 ../
drwxr-x---  2 geon   geon   4096 Jul 17 11:06 geon/
drwxr-x---  4 ubuntu ubuntu 4096 Jul 17 11:06 ubuntu/
ubuntu@ip-172-31-0-94:/home$ 

pid : 프로세스 아이디
ppid : 부모 프로세스 아이디로 부모가 죽으면 자식도 다 죽는다.

UID          PID    PPID  C STIME TTY          TIME CMD
root           1       0  1 11:04 ?        00:00:03 /sbin/init
root           2       0  0 11:04 ?        00:00:00 [kthreadd]
root           3       2  0 11:04 ?        00:00:00 [rcu_gp]
root           4       2  0 11:04 ?        00:00:00 [rcu_par_gp]
root           5       2  0 11:04 ?        00:00:00 [slub_flushwq]

-r 디렉토리 -f는 force 강제

```

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/1cd40f6b-4747-4bba-a656-846694fd5c31/a5e2cdbd-b458-40d2-8420-896a308c5dbd/Untitled.png)

touch : 파일 생성

```bash
geon@ip-172-31-0-94:~$ echo "hi mugeon" > test.txt
geon@ip-172-31-0-94:~$ cat test.txt 
hi mugeon
geon@ip-172-31-0-94:~$ echo "plus txt" >> test.txt 
geon@ip-172-31-0-94:~$ cat 
^Z
[1]+  Stopped                 cat
geon@ip-172-31-0-94:~$ ^C
geon@ip-172-31-0-94:~$ cat test.txt 
hi mugeon
plus txt
geon@ip-172-31-0-94:~$ echo "flux" > test.txt 
geon@ip-172-31-0-94:~$ cat test.txt 
flux
geon@ip-172-31-0-94:~$ 

## 복사
geon@ip-172-31-0-94:~$ cp test.txt folder
geon@ip-172-31-0-94:~$ ls
folder  test.txt
geon@ip-172-31-0-94:~$ cd folder/
geon@ip-172-31-0-94:~/folder$ ls
test.txt
geon@ip-172-31-0-94:~/folder$ cd ..
geon@ip-172-31-0-94:~$ ls
folder  test.txt
geon@ip-172-31-0-94:~$ 

## find

find test.txt는 형재 폴더
geon@ip-172-31-0-94:~$ find . test.txt는 현재 폴더 ㅇ
geon@ip-172-31-0-94:~$ find . -name test.txt
./folder/test.txt
```

```bash
# 디스크 정보
ubuntu@ip-172-31-0-94:/home$ df
Filesystem     1K-blocks    Used Available Use% Mounted on
/dev/root        7941576 1685488   6239704  22% /
tmpfs             486016       0    486016   0% /dev/shm
tmpfs             194408     848    193560   1% /run
tmpfs               5120       0      5120   0% /run/lock
/dev/xvda15       106832    6186    100646   6% /boot/efi
tmpfs              97200       4     97196   1% /run/user/1000
ubuntu@ip-172-31-0-94:/home$ 

# 사용량 
ubuntu@ip-172-31-0-94:/home$ sudo du /home
8       /home/geon/folder
28      /home/geon
8       /home/ubuntu/.ssh
4       /home/ubuntu/.cache
32      /home/ubuntu
64      /home

ubuntu@ip-172-31-0-94:/home$ free -m
               total        used        free      shared  buff/cache   available
Mem:             949         180         391           0         377         611
Swap:              0           0           0
ubuntu@ip-172-31-0-94:/home$ 

top / vmstat

echo '#!/bin/sh' | sudo tee tt.sh

r: 읽기
w: 쓰기
x: 실행
나 , 그룹, 너(외부)
111 111 111

chmod 권한

ln : 링크
-s : 심볼릭 링크

echo "Two aa tao" | grep t[wa]o : w또는 a / two , tao
## 
grep <찾을단어> <file-name> [-io]
grep ^If zen.txt 시작을 if로

^ 첫번째로 찾는 패턴 표시
$ 마지막 줄의 패턴을 표시
-i : 대소문자 구분 없이
매칭되는 행의 번호 같이 보기: -n
. 전체 행이 정확히 일치하는 행만 검색하여 출력: -x
. 각 인풋 파일의 매칭되는 행의 개수 출력: -c, --count
패턴 매칭된 행의 전(Before), 후(After), 중간(Center)의 전/후 행 NUM 개수 만큼 같이 출력하기  : -B NUM, -A NUM, -C NUM
```