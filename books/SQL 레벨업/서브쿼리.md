# 서브쿼리

---

## 서브쿼리
- sql을 공부하면서 항상 듣는 말은 서브쿼리, 조인에서 조인을 우선시하라 이다. 왜 그런지 살펴보쟈

- 단점
  1. 연산 비용 추가
     - 실체적인 데이터를 저장하지 않는다. 결국 서브쿼리를 접근할 때 select를 실행시켜 추가적인 비용이 발생한다.
  2. 데이터 i/o 비용 발생
      - 서브쿼리의 결과는 결국 어디에 저장을 해야한다. 이때 db마다 저장하는 방식이 다르긴 하지만 tempdb, 임시 테이블에 주로 저장을 한다. mysql에서는 임시 테이블에서 저장을 한다. 
      - **임시 테이블은 세션 내에서만 존재하며, 세션이 종료되면 자동으로 삭제됩니다. 따라서 다른 사용자가 임시 테이블에 접근하거나 수정하는 것은 불가능합니다.**
  
  3. 최적화를 받을 수 없음
    - 서브쿼리로 만들어지는 데이터는 비슷하지만 결국 제일 주요한 차이점은 **메타 데이터**이다.
    - 인덱스 또는 fk등 제약 조건은 메타 데이터에 존재한다. 하지만 서브쿼리는 메타 데이터가 없다. 그래서 결국 쿼리를 해석하기 위해 최적화가 불가능하다.

